<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<style type="text/css">
	#canvas {
		border: dotted 2px black;
		background-color:#FAF7F8;
	}
	</style>
</head>
<body>
<section>

<div>
<canvas id="canvas" width="800" height="600">
	
This text is displayed if your browser does not support HTML5 Canvas.
</canvas>
</div>

<script type="text/javascript">
//initial variables
var canvas;
var ctx;
var x = 75;
var y = 50;
var WIDTH = 800;
var HEIGHT = 600;
var dragok = false;
var myModules=new Array();
//class variables

 function module(x,y,type,input,output)
 {
 	this.x=x;
	this.y=y;
	this.type=type;
	this.input=input;
	this.output=output;
	draw=draw;
	this.dragOK = false;
	
	/*
	if (input=="normal")
		this.radius=23;
		*/
 }
 
 
function moveModule(e){
	for (i = 0; i < myModules.length; i++)
	{
		if (myModules[i].dragOK == true) {
			myModules[i].x = e.pageX - canvas.offsetLeft;
			myModules[i].y = e.pageY - canvas.offsetTop;
		}
	}
}
 
function moduleMouseDown(e)
{
	var i=0
	for (i=0;i<myModules.length;i++)
	{
		if (e.pageX < myModules[i].x + 23 + canvas.offsetLeft &&
		e.pageX > myModules[i].x - 23 + canvas.offsetLeft &&
		e.pageY < myModules[i].y + 23 + canvas.offsetTop &&
		e.pageY > myModules[i].y - 23 + canvas.offsetTop)
		{
			myModules[i].x = e.pageX - canvas.offsetLeft;
			myModules[i].y = e.pageY - canvas.offsetTop;
			myModules[i].dragOK = true;
			canvas.onmousemove = moveModule;
			break;
		}
	}
}

function moduleMouseUp()
{
	for(i=0;i<myModules.length;i++)
		myModules[i].dragOK = false;
	 canvas.onmousemove = null;
} 
 
 //initialization
function init()
{
	 canvas = document.getElementById("canvas");
	 ctx = canvas.getContext("2d");
	 var module1=new module(75,50,"normal",1,1);
	 var module2=new module(200,200,"normal",1,1);
	 myModules[0]=module1;
	 myModules[1]=module2;
	 return setInterval(draw, 10);
}

 
 //drawing functions
function clear() 
{
 	ctx.clearRect(0, 0, WIDTH, HEIGHT);
}
function draw(){
	clear();

	ctx.beginPath();
	ctx.fillStyle = "LightBlue";
	ctx.lineWidth = "3";
	
	var i = 0;
	for (i = 0; i < myModules.length; i++)
	{
		var drawModule=myModules[i];
		ctx.beginPath();
		ctx.arc(drawModule.x, drawModule.y, 45, 0, 2 * 3.141592653589792348624, 0);
		ctx.stroke();
		ctx.fill();
		ctx.lineWidth = "3";
		ctx.fillStyle = "Gray";
		ctx.beginPath();
		ctx.arc(drawModule.x, drawModule.y + 53, 5, 0, 2 * 3.141592653589792348624, 0)
		ctx.stroke();
		ctx.fill();
		ctx.lineWidth = "3";
		ctx.fillStyle = "Gray";
		
		ctx.beginPath();
		ctx.arc(drawModule.x, drawModule.y - 53, 5, 0, 2 * 3.141592653589792348624, 0)
		ctx.stroke();
		ctx.fill();
	}
}
function myMove(e)
{
	 if (dragok){
	  x = e.pageX - canvas.offsetLeft;
	  y = e.pageY - canvas.offsetTop;
 	}
}

init()
canvas.onmousedown = moduleMouseDown;
canvas.onmouseup = moduleMouseUp;
</script>

</section>
</body>
</html>